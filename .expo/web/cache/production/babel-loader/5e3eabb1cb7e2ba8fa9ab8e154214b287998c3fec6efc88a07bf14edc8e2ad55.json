{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{Audio}from\"expo-av\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Player=({title,url,tone,page,onClose})=>{const[sound,setSound]=useState(null);const[isPlaying,setIsPlaying]=useState(false);const[position,setPosition]=useState(0);const[duration,setDuration]=useState(0);useEffect(()=>{return()=>{if(sound){sound.unloadAsync();}};},[sound]);const togglePlay=async()=>{try{if(!sound){const{sound}=await Audio.Sound.createAsync({uri:'https://bandinhaecc-v2.vercel.app/'+url},{shouldPlay:true});const newSound=sound;setSound(newSound);setIsPlaying(true);newSound.setOnPlaybackStatusUpdate(status=>{if(\"positionMillis\"in status)setPosition(status.positionMillis);if(\"durationMillis\"in status)setDuration(status.durationMillis||0);if(\"isPlaying\"in status)setIsPlaying(status.isPlaying);});}else{if(isPlaying){await sound.pauseAsync();}else{await sound.playAsync();}}}catch(err){console.error(\"Erro ao tocar áudio:\",err);}};const seek=async ms=>{if(sound){let newPosition=position+ms;if(newPosition<0)newPosition=0;if(duration&&newPosition>duration)newPosition=duration;await sound.setPositionAsync(newPosition);}};const formatTime=ms=>{const totalSeconds=Math.floor(ms/1000);const minutes=Math.floor(totalSeconds/60);const seconds=totalSeconds%60;return`${minutes}:${seconds<10?\"0\":\"\"}${seconds}`;};return _jsxs(View,{style:styles.modal,children:[_jsxs(View,{style:styles.header,children:[_jsx(Text,{style:styles.headerTitle,children:\"Reprodutor\"}),_jsx(TouchableOpacity,{onPress:onClose,children:_jsx(Text,{style:styles.closeButton,children:\"\\u2715 Fechar\"})})]}),_jsxs(View,{style:styles.body,children:[_jsxs(View,{style:styles.trackInfo,children:[_jsx(Text,{style:styles.trackTitle,children:title}),_jsxs(Text,{style:styles.trackTitleTomPage,children:[\"Tom: \",tone,\" . P\\xE1g:\",page]}),_jsx(Text,{style:styles.trackMeta})]}),_jsxs(View,{style:styles.progressContainer,children:[_jsx(Text,{children:formatTime(position)}),_jsx(View,{style:styles.progressBar,children:_jsx(View,{style:[styles.progress]})}),_jsx(Text,{children:formatTime(duration)})]}),_jsxs(View,{style:styles.controls,children:[_jsx(TouchableOpacity,{onPress:()=>seek(-10000),style:styles.controlButton,children:_jsx(Text,{children:\"\\xAB 10s\"})}),_jsx(TouchableOpacity,{onPress:togglePlay,style:styles.controlButton,children:_jsx(Text,{children:isPlaying?\"⏸ Pausar\":\"▶️ Tocar\"})}),_jsx(TouchableOpacity,{onPress:()=>seek(10000),style:styles.controlButton,children:_jsx(Text,{children:\"10s \\xBB\"})})]})]})]});};const styles=StyleSheet.create({modal:{width:\"100%\",maxWidth:500,backgroundColor:\"#fff\",borderRadius:12,overflow:\"hidden\"},header:{backgroundColor:\"#1c4587\",height:80,padding:12,flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\"},headerTitle:{color:\"#fff\",fontWeight:\"700\",fontSize:24},closeButton:{color:\"#fff\",fontWeight:\"600\"},body:{padding:16,gap:12},trackInfo:{marginBottom:12},trackTitle:{fontWeight:800,fontSize:18},trackTitleTomPage:{fontWeight:\"800\",fontSize:16,color:\"#91969eff\"},trackMeta:{color:\"#666\",fontSize:14},progressContainer:{flexDirection:\"row\",alignItems:\"center\",gap:10},progressBar:{flex:1,height:5,backgroundColor:\"#ccc\",borderRadius:3},progress:{height:5,backgroundColor:\"#2196F3\",borderRadius:3},controls:{flexDirection:\"row\",justifyContent:\"space-around\",marginTop:16},controlButton:{paddingHorizontal:10,paddingVertical:6,backgroundColor:\"#eee\",borderRadius:6}});","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","TouchableOpacity","Audio","jsx","_jsx","jsxs","_jsxs","Player","title","url","tone","page","onClose","sound","setSound","isPlaying","setIsPlaying","position","setPosition","duration","setDuration","unloadAsync","togglePlay","Sound","createAsync","uri","shouldPlay","newSound","setOnPlaybackStatusUpdate","status","positionMillis","durationMillis","pauseAsync","playAsync","err","console","error","seek","ms","newPosition","setPositionAsync","formatTime","totalSeconds","Math","floor","minutes","seconds","style","styles","modal","children","header","headerTitle","onPress","closeButton","body","trackInfo","trackTitle","trackTitleTomPage","trackMeta","progressContainer","progressBar","progress","controls","controlButton","create","width","maxWidth","backgroundColor","borderRadius","overflow","height","padding","flexDirection","justifyContent","alignItems","color","fontWeight","fontSize","gap","marginBottom","flex","marginTop","paddingHorizontal","paddingVertical"],"sources":["C:/Users/BOSCH/Projetos/bandinhaAPP/src/components/Player.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { View, Text, StyleSheet, TouchableOpacity } from \"react-native\";\r\nimport { Audio } from \"expo-av\";\r\n\r\ntype PlayerProps = {\r\n    title: string;\r\n    url: string;\r\n    tone: string;\r\n    page: string;\r\n    onClose?: () => void;\r\n};\r\n\r\nexport const Player: React.FC<PlayerProps> = ({ title, url, tone, page, onClose }) => {\r\n    const [sound, setSound] = useState<Audio.Sound | null>(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [position, setPosition] = useState(0);\r\n    const [duration, setDuration] = useState(0);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (sound) {\r\n                sound.unloadAsync();\r\n            }\r\n        };\r\n    }, [sound]);\r\n\r\n    const togglePlay = async () => {\r\n        try {\r\n            if (!sound) {\r\n                const { sound } = await Audio.Sound.createAsync(\r\n                    { uri: 'https://bandinhaecc-v2.vercel.app/' + url },\r\n                    { shouldPlay: true }\r\n                );\r\n                const newSound = sound;\r\n                setSound(newSound);\r\n                setIsPlaying(true);\r\n\r\n                newSound.setOnPlaybackStatusUpdate((status) => {\r\n                    if (\"positionMillis\" in status) setPosition(status.positionMillis);\r\n                    if (\"durationMillis\" in status) setDuration(status.durationMillis || 0);\r\n                    if (\"isPlaying\" in status) setIsPlaying(status.isPlaying);\r\n                });\r\n            } else {\r\n                if (isPlaying) {\r\n                    await sound.pauseAsync();\r\n                } else {\r\n                    await sound.playAsync();\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Erro ao tocar áudio:\", err);\r\n        }\r\n    };\r\n\r\n    const seek = async (ms: number) => {\r\n        if (sound) {\r\n            let newPosition = position + ms;\r\n            if (newPosition < 0) newPosition = 0;\r\n            if (duration && newPosition > duration) newPosition = duration;\r\n            await sound.setPositionAsync(newPosition);\r\n        }\r\n    };\r\n\r\n    const formatTime = (ms: number) => {\r\n        const totalSeconds = Math.floor(ms / 1000);\r\n        const minutes = Math.floor(totalSeconds / 60);\r\n        const seconds = totalSeconds % 60;\r\n        return `${minutes}:${seconds < 10 ? \"0\" : \"\"}${seconds}`;\r\n    };\r\n\r\n    return (\r\n\r\n        <View style={styles.modal}>\r\n            <View style={styles.header}>\r\n                <Text style={styles.headerTitle}>Reprodutor</Text>\r\n                <TouchableOpacity onPress={onClose}>\r\n                    <Text style={styles.closeButton}>✕ Fechar</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n\r\n            <View style={styles.body}>\r\n                <View style={styles.trackInfo}>\r\n                    <Text style={styles.trackTitle}>{title}</Text>\r\n                    <Text style={styles.trackTitleTomPage}>Tom: {tone} . Pág:{page}</Text>\r\n                    <Text style={styles.trackMeta}></Text>\r\n                </View>\r\n\r\n                <View style={styles.progressContainer}>\r\n                    <Text>{formatTime(position)}</Text>\r\n                    <View style={styles.progressBar}>\r\n                        <View style={[styles.progress]} />\r\n                    </View>\r\n                    <Text>{formatTime(duration)}</Text>\r\n                </View>\r\n\r\n                <View style={styles.controls}>\r\n                    <TouchableOpacity onPress={() => seek(-10000)} style={styles.controlButton}>\r\n                        <Text>« 10s</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity onPress={togglePlay} style={styles.controlButton}>\r\n                        <Text>{isPlaying ? \"⏸ Pausar\" : \"▶️ Tocar\"}</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity onPress={() => seek(10000)} style={styles.controlButton}>\r\n                        <Text>10s »</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    modal: {\r\n        width: \"100%\",\r\n        maxWidth: 500,\r\n        backgroundColor: \"#fff\",\r\n        borderRadius: 12,\r\n        overflow: \"hidden\",\r\n    },\r\n\r\n    header: {\r\n        backgroundColor: \"#1c4587\",\r\n        height: 80,\r\n        padding: 12,\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n    },\r\n\r\n    headerTitle: { color: \"#fff\", fontWeight: \"700\", fontSize: 24 },\r\n    closeButton: { color: \"#fff\", fontWeight: \"600\" },\r\n    body: { padding: 16, gap: 12 },\r\n    trackInfo: { marginBottom: 12 },\r\n    trackTitle: { fontWeight: 800, fontSize: 18 },\r\n    trackTitleTomPage: {fontWeight: \"800\", fontSize: 16, color: \"#91969eff\" },\r\n    trackMeta: { color: \"#666\", fontSize: 14 },\r\n    progressContainer: { flexDirection: \"row\", alignItems: \"center\", gap: 10 },\r\n    progressBar: { flex: 1, height: 5, backgroundColor: \"#ccc\", borderRadius: 3 },\r\n    progress: { height: 5, backgroundColor: \"#2196F3\", borderRadius: 3 },\r\n    controls: { flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 16 },\r\n    controlButton: { paddingHorizontal: 10, paddingVertical: 6, backgroundColor: \"#eee\", borderRadius: 6 },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}